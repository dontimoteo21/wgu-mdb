(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"6ZY7":function(t,n,e){"use strict";e.r(n);var u,l=e("CcnG"),r=function(){return function(){}}(),o=e("y5Pl"),i=e("M+1Z"),s=e("JEFa"),c=e("pMnS"),a=e("aQxW"),d=e("NMrR"),b=e("OMr1"),p=e("Ip0R");!function(t){t.CUSTOMERS_QUERY="[Customers] Query",t.CUSTOMERS_LOADED="[Customers] Fetched",t.CUSTOMERS_ADDED="[Customers] Added",t.CUSTOMERS_EDITED="[Customers] Edited",t.CUSTOMERS_DELETED="[Customers] Deleted",t.CUSTOMERS_ERROR="[Customers] Error"}(u||(u={}));var m=function(){return function(){this.type=u.CUSTOMERS_QUERY}}(),f=function(){return function(t){this.payload=t,this.type=u.CUSTOMERS_LOADED}}(),h=function(){return function(t){this.payload=t,this.type=u.CUSTOMERS_ADDED}}(),O=function(){return function(t){this.payload=t,this.type=u.CUSTOMERS_EDITED}}(),y=function(){return function(t){this.payload=t,this.type=u.CUSTOMERS_DELETED}}(),E=function(){return function(t){this.payload=t,this.type=u.CUSTOMERS_ERROR}}(),j=e("yGQT"),S=Object(j.B)("customers"),C=Object(j.D)(S,function(t){return t.customers}),g=Object(j.D)(S,function(t){return t.isLoading}),R=(Object(j.D)(S,function(t){return t.error}),e("67Y/")),v=e("t9fZ"),D=e("d2bA"),z=e("h9cb"),M=e("CB3U"),T=function(){function t(t,n,e){this.modalService=t,this.store=n,this.afAuth=e,this.modalConfig={class:"modal-dialog-centered"}}return t.prototype.ngOnInit=function(){var t=this;this.isLoading$=this.store.select(g),this.customersSub=this.store.select(C).pipe(Object(R.a)(function(n){return t.user&&!n&&t.store.dispatch(new m),n})).subscribe(function(n){if(n&&0!==n.length){var e=Number(n[n.length-1].id);t.lastCustomerIndex=e}else t.lastCustomerIndex=0;t.customers=n})},Object.defineProperty(t.prototype,"user",{get:function(){return this.afAuth.auth.currentUser},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.customersSub&&this.customersSub.unsubscribe()},t.prototype.onAddCustomer=function(){var t=this;this.modalRef=this.modalService.show(z.a,this.modalConfig),this.modalRef.content.heading="Add new customer",this.modalRef.content.customer.id=this.lastCustomerIndex+1,this.modalRef.content.customerData.pipe(Object(v.a)(1)).subscribe(function(n){t.store.dispatch(new h({customer:n}))})},t.prototype.openEditCustomerModal=function(t){var n=this;this.modalRef=this.modalService.show(z.a,this.modalConfig),this.modalRef.content.heading="Edit customer",this.modalRef.content.customer={key:t.key,id:t.id||null,name:t.name||null,description:t.description||null},this.modalRef.content.customerData.pipe(Object(v.a)(1)).subscribe(function(t){n.store.dispatch(new O({customer:t}))})},t.prototype.openConfirmModal=function(t){var n=this;this.modalRef=this.modalService.show(D.a,this.modalConfig),this.modalRef.content.confirmation.pipe(Object(v.a)(1)).subscribe(function(e){e&&n.store.dispatch(new y({customer:t}))})},t.prototype.onCustomerEdit=function(t){this.openEditCustomerModal(t)},t.prototype.onCustomerDelete=function(t){this.openConfirmModal(t)},t}(),w=l.pb({encapsulation:0,styles:[[".container-fluid[_ngcontent-%COMP%]{background:url(northstar.97b897b1e2f735588ff2.jpg) 0 0/cover #000}"]],data:{}});function U(t){return l.Jb(0,[(t()(),l.rb(0,0,null,null,2,"div",[["class","mt-4 white"]],null,null,null,null,null)),(t()(),l.rb(1,0,null,null,1,"app-customers-list",[],null,[[null,"customerEdited"],[null,"customerDeleted"]],function(t,n,e){var u=!0,l=t.component;return"customerEdited"===n&&(u=!1!==l.onCustomerEdit(e)&&u),"customerDeleted"===n&&(u=!1!==l.onCustomerDelete(e)&&u),u},a.b,a.a)),l.qb(2,114688,null,0,d.a,[],{customers:[0,"customers"]},{customerDeleted:"customerDeleted",customerEdited:"customerEdited"})],function(t,n){t(n,2,0,n.component.customers)},null)}function _(t){return l.Jb(0,[(t()(),l.rb(0,0,null,null,3,"div",[["class","d-flex justify-content-center align-items-center"],["style","margin-top: 200px"]],null,null,null,null,null)),(t()(),l.rb(1,0,null,null,2,"div",[["class","spinner-grow text-primary"],["role","status"],["style","width: 4rem; height: 4rem;"]],null,null,null,null,null)),(t()(),l.rb(2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),l.Hb(-1,null,["Loading..."]))],null,null)}function k(t){return l.Jb(0,[(t()(),l.rb(0,0,null,null,15,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),l.rb(1,0,null,null,4,"div",[["class","section-header"]],null,null,null,null,null)),(t()(),l.rb(2,0,null,null,1,"h3",[["class","grey-text"]],null,null,null,null,null)),(t()(),l.Hb(-1,null,["Customers list"])),(t()(),l.rb(4,0,null,null,1,"p",[["class","grey-text pt-3"]],null,null,null,null,null)),(t()(),l.Hb(-1,null,["Manage your customers list"])),(t()(),l.rb(6,0,null,null,9,"div",[["class","container-fluid pb-5"]],null,null,null,null,null)),(t()(),l.rb(7,0,null,null,8,"div",[["class","pt-3 pb-5"]],null,null,null,null,null)),(t()(),l.rb(8,0,null,null,2,"button",[["color","primary"],["mdbBtn",""]],null,[[null,"click"]],function(t,n,e){var u=!0;return"click"===n&&(u=!1!==t.component.onAddCustomer()&&u),u},null,null)),l.qb(9,81920,null,0,b.I,[l.k,l.F],{color:[0,"color"]},null),(t()(),l.Hb(-1,null,["Add new customer"])),(t()(),l.ib(16777216,null,null,1,null,U)),l.qb(12,16384,null,0,p.k,[l.Q,l.N],{ngIf:[0,"ngIf"]},null),(t()(),l.ib(16777216,null,null,2,null,_)),l.qb(14,16384,null,0,p.k,[l.Q,l.N],{ngIf:[0,"ngIf"]},null),l.Cb(131072,p.b,[l.h])],function(t,n){var e=n.component;t(n,9,0,"primary"),t(n,12,0,e.customers),t(n,14,0,l.Ib(n,14,0,l.Bb(n,15).transform(e.isLoading$)))},null)}function A(t){return l.Jb(0,[(t()(),l.rb(0,0,null,null,1,"app-customers",[],null,null,null,k,w)),l.qb(1,245760,null,0,T,[b.E,j.n,M.a],null,null)],function(t,n){t(n,1,0)},null)}var I=l.nb("app-customers",T,A,{},{},[]),L=e("cyBs"),$=e("gIcY"),x=e("PCNd"),q=e("ZYCi"),F=function(){return function(){}}(),J={customers:null,isLoading:!0,error:null};function Q(t,n){switch(void 0===t&&(t=J),n.type){case u.CUSTOMERS_QUERY:return Object.assign({},t,{isLoading:!0});case u.CUSTOMERS_LOADED:return Object.assign({},t,{customers:n.payload.customers,isLoading:!1});case u.CUSTOMERS_ERROR:return Object.assign({},t,{isLoading:!1,error:n.payload.error});default:return t}}var Y=e("mrSG"),N=e("jYNz"),Z=e("/PH2"),H=e("15JJ"),B=e("9Z1F"),G=e("F/XL"),P=e("Xd88"),V=function(){function t(t,n,e){var l=this;this.actions$=t,this.customersService=n,this.store=e,this.query$=this.actions$.pipe(Object(N.d)(u.CUSTOMERS_QUERY),Object(Z.a)(this.store.pipe(Object(j.E)(P.e))),Object(H.a)(function(t){return l.customersService.get(t[1].uid).pipe(Object(R.a)(function(t){var n=t.map(function(t){var n=t.payload.key,e=t.payload.val();return{key:n,id:e.id,name:e.name,description:e.description}});return new f({customers:n})}),Object(B.a)(function(t){return Object(G.a)(new E({error:t}))}))})),this.added$=this.actions$.pipe(Object(N.d)(u.CUSTOMERS_ADDED),Object(R.a)(function(t){return t.payload}),Object(Z.a)(this.store.pipe(Object(j.E)(P.e))),Object(H.a)(function(t){return l.customersService.add(t[0].customer,t[1].uid)})),this.edit$=this.actions$.pipe(Object(N.d)(u.CUSTOMERS_EDITED),Object(R.a)(function(t){return t.payload}),Object(Z.a)(this.store.pipe(Object(j.E)(P.e))),Object(H.a)(function(t){return l.customersService.update(t[0].customer,t[1].uid).pipe(Object(B.a)(function(t){return Object(G.a)(new E({error:t}))}))})),this.delete$=this.actions$.pipe(Object(N.d)(u.CUSTOMERS_DELETED),Object(R.a)(function(t){return t.payload}),Object(Z.a)(this.store.pipe(Object(j.E)(P.e))),Object(H.a)(function(t){return l.customersService.delete(t[0].customer,t[1].uid)}))}return Object(Y.b)([Object(N.b)(),Object(Y.d)("design:type",Object)],t.prototype,"query$",void 0),Object(Y.b)([Object(N.b)({dispatch:!1}),Object(Y.d)("design:type",Object)],t.prototype,"added$",void 0),Object(Y.b)([Object(N.b)({dispatch:!1}),Object(Y.d)("design:type",Object)],t.prototype,"edit$",void 0),Object(Y.b)([Object(N.b)({dispatch:!1}),Object(Y.d)("design:type",Object)],t.prototype,"delete$",void 0),t}(),X=e("7dA5");e.d(n,"CustomersModuleNgFactory",function(){return W});var W=l.ob(r,[],function(t){return l.yb([l.zb(512,l.j,l.db,[[8,[o.a,i.a,s.a,c.a,I,L.c,L.d,L.b]],[3,l.j],l.z]),l.zb(4608,p.m,p.l,[l.v,[2,p.u]]),l.zb(4608,$.v,$.v,[]),l.zb(4608,b.V,b.V,[]),l.zb(1073742336,p.c,p.c,[]),l.zb(1073742336,b.y,b.y,[]),l.zb(1073742336,b.x,b.x,[]),l.zb(1073742336,b.w,b.w,[]),l.zb(1073742336,$.t,$.t,[]),l.zb(1073742336,$.i,$.i,[]),l.zb(1073742336,b.j,b.j,[]),l.zb(1073742336,b.k,b.k,[]),l.zb(1073742336,x.a,x.a,[]),l.zb(1073742336,q.n,q.n,[[2,q.t],[2,q.k]]),l.zb(1073742336,F,F,[]),l.zb(1073742336,b.Z,b.Z,[]),l.zb(1073742336,b.jb,b.jb,[]),l.zb(1024,j.F,function(){return[{}]},[]),l.zb(1024,j.j,function(){return[{key:"customers",reducerFactory:j.z,metaReducers:[],initialState:void 0}]},[]),l.zb(1024,j.G,j.H,[l.r,j.F,j.j]),l.zb(1024,j.q,function(){return[Q]},[]),l.zb(1024,j.r,function(t){return[t]},[j.q]),l.zb(1024,j.b,function(t,n,e){return[j.w(t,n,e)]},[l.r,j.q,j.r]),l.zb(1073873408,j.o,j.o,[j.G,j.b,j.g,j.p]),l.zb(512,V,V,[N.a,X.a,j.n]),l.zb(1024,N.i,function(t){return[N.e(t)]},[V]),l.zb(1073742336,N.g,N.g,[N.f,N.i,[2,j.p],[2,j.o]]),l.zb(1073742336,r,r,[]),l.zb(1024,q.i,function(){return[[{path:"",component:T}]]},[])])})}}]);